!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).rx={})}(this,function(t){"use strict";function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"unknown",n=document.createElement("a");n.download=e,n.style.display="none",n.href=URL.createObjectURL(t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var u=e(function(t){var e=function(i){var c,t=Object.prototype,s=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",r=e.toStringTag||"@@toStringTag";function a(t,e,n,r){var i,a,u,c,o=e&&e.prototype instanceof m?e:m,s=Object.create(o.prototype),f=new P(r||[]);return s._invoke=(i=t,a=n,u=f,c=p,function(t,e){if(c===v)throw new Error("Generator is already running");if(c===d){if("throw"===t)throw e;return A()}for(u.method=t,u.arg=e;;){var n=u.delegate;if(n){var r=S(n,u);if(r){if(r===y)continue;return r}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(c===p)throw c=d,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c=v;var o=l(i,a,u);if("normal"===o.type){if(c=u.done?d:h,o.arg===y)continue;return{value:o.arg,done:u.done}}"throw"===o.type&&(c=d,u.method="throw",u.arg=o.arg)}}),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}i.wrap=a;var p="suspendedStart",h="suspendedYield",v="executing",d="completed",y={};function m(){}function u(){}function f(){}var g={};g[o]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(T([])));x&&x!==t&&s.call(x,o)&&(g=x);var b=f.prototype=m.prototype=Object.create(g);function E(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function L(c){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,o){var i=l(c[t],c,n);if("throw"!==i.type){var a=i.arg,u=a.value;return u&&"object"==typeof u&&s.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):Promise.resolve(u).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}o(i.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function S(t,e){var n=t.iterator[e.method];if(n===c){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=c,S(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,y;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=c),e.delegate=null,y):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function R(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(R,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(s.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=c,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:c,done:!0}}return u.prototype=b.constructor=f,f.constructor=u,f[r]=u.displayName="GeneratorFunction",i.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===u||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,r in t||(t[r]="GeneratorFunction")),t.prototype=Object.create(b),t},i.awrap=function(t){return{__await:t}},E(L.prototype),L.prototype[n]=function(){return this},i.AsyncIterator=L,i.async=function(t,e,n,r){var o=new L(a(t,e,n,r));return i.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},E(b),b[r]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},i.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},i.values=T,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=s.call(o,"catchLoc"),u=s.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=c),y}},i}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}});function c(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}var a=function(u){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=u.apply(t,a);function o(t){c(r,e,n,o,i,"next",t)}function i(t){c(r,e,n,o,i,"throw",t)}o(void 0)})}};function n(){return(n=a(u.mark(function t(e){var n,r=arguments;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=1<r.length&&void 0!==r[1]?r[1]:"unknown.txt",i(new Blob([e],{type:"text/plain"}),n);case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}function r(){return(r=a(u.mark(function t(e){var n,r,o=arguments;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=1<o.length&&void 0!==o[1]?o[1]:e.substr(e.lastIndexOf("/")),t.prev=1,t.next=4,fetch(e);case 4:return r=t.sent,t.next=7,r.blob();case 7:i(t.sent,n),t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(1),t.abrupt("return",console.log("下载出错了 ",t.t0));case 14:case"end":return t.stop()}},t,null,[[1,11]])}))).apply(this,arguments)}var o=function(t){if(Array.isArray(t))return t};var s=function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n};var f=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var l=function(t,e){return o(t)||s(t,e)||f()};function p(){return(p=a(u.mark(function t(e,n){var r,o,i,a=arguments;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=2<a.length&&void 0!==a[2]?a[2]:{},t.next=3,fetch(e,r);case 3:return o=t.sent,t.next=6,o.blob();case 6:i=t.sent,n.src=window.URL.createObjectURL(i);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}var g=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=function t(e){var n=e.href,r=void 0===n?"":n,o=e.website,i=void 0===o?"":o,a=e.protocol,u=void 0===a?"":a,c=e.domain,s=void 0===c?"":c,f=e.accessPath,l=void 0===f?"":f,p=e.params,h=void 0===p?{}:p,v=e.url,d=void 0===v?"":v,y=e.port,m=void 0===y?0:y;g(this,t),this.href=r,this.website=i,this.protocol=u,this.domain=s,this.accessPath=l,this.params=h,this.url=d,this.port=m},v={http:80,https:443,ssh:22,ftp:21};function d(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=t.type,o=void 0===e?d.DataURL:e,n=t.encoding,i=void 0===n?"UTF-8":n;return new Promise(function(e,n){r||n(new Error("file not exists"));var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=function(t){n(t)},t[o](r,i)})}function y(t,e){var n=null,r=new Promise(function(t,e){n=function(){e(new Error("abort promise"))}}),o=Promise.race([t,r]);return setTimeout(function(){n()},e),o}d.DataURL="readAsDataURL",d.Text="readAsText",d.BinaryString="readAsBinaryString",d.ArrayBuffer="readAsArrayBuffer";var m=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}};var w=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)};var x=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var b=function(t){return m(t)||w(t)||x()};function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var L=function(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),t};function S(n){return new Promise(function(t){if("number"==typeof n)setTimeout(t,n);else if("function"==typeof n)var e=setInterval(function(){n()&&(clearInterval(e),t())},100);else t()})}var R=function(){function i(t){var e=t.timeout,n=void 0===e?1e4:e,r=t.limit,o=void 0===r?10:r;g(this,i),this.timeout=n,this.limit=o,this.execCount=0,this.waitArr=[]}return L(i,[{key:"fetch",value:function(n){function t(t,e){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(){var n=a(u.mark(function t(e,n){var r,o=this,i=arguments;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(){var t=a(u.mark(function t(){var e;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("执行 execCount: ".concat(o.execCount,", waitArr length: ").concat(o.waitArr.length,", index: ").concat(JSON.stringify(o.waitArr[0]))),o.execCount++,e=o.waitArr.shift(),t.prev=3,t.next=6,y(fetch.apply(void 0,b(e)),o.timeout);case 6:return t.abrupt("return",t.sent);case 7:return t.prev=7,o.execCount--,t.finish(7);case 10:case"end":return t.stop()}},t,null,[[3,,7,10]])}));return function(){return t.apply(this,arguments)}}(),this.waitArr.push(i),t.next=4,S(function(){return o.execCount<o.limit});case 4:return t.abrupt("return",r());case 5:case"end":return t.stop()}},t,this)}));return function(t,e){return n.apply(this,arguments)}}())}]),i}();function O(t){for(var e=[];;){var n=t.next();if(n.done)break;e.push(n.value)}return e}function P(){return(P=a(u.mark(function t(e,n){var r,o;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=[],t.t0=u.keys(e);case 2:if((t.t1=t.t0()).done){t.next=11;break}return o=t.t1.value,t.t2=r,t.next=7,n(e[o]);case 7:t.t3=t.sent,r=t.t2.concat.call(t.t2,t.t3),t.next=2;break;case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}},t)}))).apply(this,arguments)}function T(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t){return t};return t.reduce(function(t,e){return t.set(n(e),r(e)),t},new Map)}function A(t,e){return e<=0?"":t+A(t,e-1)}var k,j=function t(e,n,r,o){g(this,t),this.name=e,this.format=n,this.value=r,this.index=o},C={year:"y{4}|y{2}",month:"M{1,2}",day:"d{1,2}",hour:"h{1,2}",minute:"m{1,2}",second:"s{1,2}",milliSecond:"S{1,3}"};function _(t){return t.selectionStart}function F(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e;t.focus(),t.setSelectionRange(e,n)}function I(t){return t&&"string"==typeof t?t.toLowerCase():t}function M(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;try{return t()}catch(t){return e}}document.addEventListener("focus",function(t){k=t.target},!0),document.addEventListener("blur",function(){k=null},!0);var U=e(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(t){return n(t)}:e.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(t)}e.exports=r});var N=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var D=function(t,e){return!e||"object"!==U(e)&&"function"!=typeof e?N(t):e},B=e(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n}),G=e(function(n){function r(t,e){return n.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.exports=r});var $=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G(t,e)};var Y=e(function(r){function o(t,e,n){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?r.exports=o=function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&G(o,n.prototype),o}:r.exports=o=Reflect.construct,o.apply(null,arguments)}r.exports=o}),q=function(){function t(){g(this,t)}return L(t,null,[{key:"getFactory",value:function(){var n=new Map;return new(function(){function t(){g(this,t)}return L(t,[{key:"register",value:function(t,e){return n.set(t,e),e}},{key:"getInstance",value:function(t){var e=n.get(t);return e?Y(e,b(Array.from(arguments).slice(1))):null}}]),t}())}}]),t}();var H=new RegExp("^(-?\\d+)(.\\d+)?$");var J=new RegExp("^-?\\d+$");function W(t){return t&&0!==t.trim().length?t:null}t.FetchLimiting=R,t.StateMachine=q,t.appends=function(t,e){for(var n in e)t.append(n,e[n]);return t},t.arrayToMap=T,t.asIterator=O,t.asyncFlatMap=function(t,e){return P.apply(this,arguments)},t.blankToNull=W,t.blankToNullField=function(t){var e={};for(var n in t){var r=t[n];e[n]="string"==typeof r?W(r):r}return e},t.copyText=function(t){var e=document.createElement("input");document.body.appendChild(e),e.setAttribute("value",t),e.select();var n=document.execCommand("copy");return document.body.removeChild(e),n},t.createElByString=function(t){var e=document.createElement("div");return e.innerHTML=t,e.querySelector("*")},t.dateFormat=function(t,e){var n={"y+":t.getFullYear(),"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),"S+":t.getMilliseconds()};for(var r in n)if(new RegExp("("+r+")").test(e))if("y+"===r)e=e.replace(RegExp.$1,(""+n[r]).substr(4-RegExp.$1.length));else if("S+"===r){var o=RegExp.$1.length;o=1===o?3:o,e=e.replace(RegExp.$1,("00"+n[r]).substr((""+n[r]).length-1,o))}else e=e.replace(RegExp.$1,1===RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length));return e},t.debounce=function(o,i){var a;return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this;a&&clearTimeout(a),a=setTimeout(function(){i.call.apply(i,[r].concat(e))},o)}},t.deletes=function(e,t){return t.forEach(function(t){return e.delete(t)}),e},t.download=i,t.downloadString=function(t){return n.apply(this,arguments)},t.downloadUrl=function(t){return r.apply(this,arguments)},t.emptyAllField=function(t){var e={};for(var n in t)e[n]=null;return e},t.fetchTimeout=y,t.fill=A,t.flatMap=function(t,n){return t.reduce(function(t,e){return t.concat(n(e))},[])},t.formDataToArray=function(t){return O(t.entries())},t.format=function(t,n){return n?Object.keys(n).reduce(function(t,e){return t.replace(new RegExp("{".concat(e,"}"),"g"),n[e])},t):t},t.getCookies=function(){return document.cookie.split(";").map(function(t){return t.split("=")}).map(function(t){return[t[0].trim(),t[1].trim()]}).reduce(function(t,e){var n=l(e,2),r=n[0],o=n[1];return t.set(r,o)},new Map)},t.getCusorPostion=_,t.groupBy=function(t,r){return t.reduce(function(t,e){var n=r(e);return t.has(n)||t.set(n,[]),t.get(n).push(e),t},new Map)},t.insertText=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:_(t),r=t.value;t.value=r.substr(0,n)+e+r.substr(n),F(t,n+e.length)},t.isEditable=function(t){return t&&(t.isContentEditable||["input","date","datetime","select","textarea"].includes(I(t.tagName)))},t.isFloat=function(t){return H.test(t)},t.isNumber=function(t){return J.test(t)},t.lastFocus=function(){return k},t.loadResource=function(t,e){return p.apply(this,arguments)},t.mapToObject=function(t){var e={},n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=l(i.value,2),c=u[0],s=u[1];e[c]=s}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e},t.objToFormData=function(t){var e=new FormData;if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];e.append(n,r)}return e},t.parseUrl=function(t){if(!t)throw new Error("url 不能为空");var e=new RegExp("^((\\w+)://([\\w\\.]*)(:(\\d+))?)(.*)").exec(t),n=new h({url:t,website:e[1],protocol:e[2],domain:e[3],port:e[5],href:e[6]}),r=t.substr(n.website.length),o=r.indexOf("?");return-1===o?n.accessPath=r:(n.accessPath=r.substr(0,o),n.accessPath.endsWith("/")&&(n.accessPath=n.accessPath.substring(0,n.accessPath.length-1)),n.port=n.port||v[n.protocol]||"",n.params=r.substr(o+1).split("&").map(function(t){return t.split("=")}).filter(function(t){return""!==t[0]}).reduce(function(t,e){var n=decodeURIComponent(e[0]),r=decodeURIComponent(1===e.length?"":e[1]),o=t[n];return void 0!==o?(Array.isArray(o)||(t[n]=[o]),t[n].push(r)):t[n]=r,t},{})),n},t.randomInt=function(){var t,e;if(0===arguments.length)throw new Error("非法参数，必须指定最大值");return 1===arguments.length?(t=0,e=arguments.length<=0?void 0:arguments[0]):1<arguments.length&&(t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1]),t+Math.floor(Math.random()*(e-t))},t.range=function(t,e){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=[],o=t;o<e;o+=n)r.push(o);return r},t.readLocal=d,t.removeEl=function(t){t.parentElement.removeChild(t)},t.removeText=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t.selectionStart,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t.selectionEnd,r=_(t),o=t.value;t.value=o.substr(0,e)+o.substr(n,o.length),F(t,r)},t.returnItself=function(t){return t},t.safeExec=M,t.setCusorPostion=F,t.sets=function(t,e){for(var n in e)t.set(n,e[n]);return t},t.singleModel=function(e){var a;return function(t){function i(){var t,e;if(g(this,i),a)return D(e,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=D(this,(t=B(i)).call.apply(t,[this].concat(r))),a=N(e),e}return $(i,e),i}()},t.spliceParams=function(t){if(!t)throw new Error("参数对象不能为空：".concat(t));var e="";for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];e+="".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(r),"&")}return e},t.strToArrayBuffer=function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!==t.length;++r)n[r]=255&t.charCodeAt(r);return e},t.strToDate=function(o,t){var e={year:(new Date).getFullYear().toString(),month:"01",day:"01",hour:"00",minute:"00",second:"00",milliSecond:"000"},i=[];for(var n in C){var r=new RegExp(C[n]);if(r.test(t)){var a=r.exec(t)[0],u=A("`",a.length),c=t.indexOf(a);t=t.replace(a,u),i.push(new j(n,A("\\d",a.length),null,c))}else i.push(new j(n,null,e[n],-1))}if(t=t.replace(new RegExp("`","g"),"\\d"),!new RegExp(t).test(o))return null;i.filter(function(t){return t.format}).sort(function(t,e){return t.index-e.index}).map(function(t){var e=new RegExp(t.format).exec(o);return null!==e&&0<e.length&&(o=o.replace(e[0],""),t.value=e[0]),t}).forEach(function(t,e){var n=t.format,r=new RegExp(n).exec(o);null!==r&&0<r.length&&(o=o.replace(r[0],""),i[e].value=r[0])});var s=T(i,function(t){return t.name},function(t){return t.value});2===s.get("year").length&&s.set("year",e.year.substr(0,2).concat(s.get("year")));var f="".concat(s.get("year"),"-").concat(s.get("month"),"-").concat(s.get("day"),"T").concat(s.get("hour"),":").concat(s.get("minute"),":").concat(s.get("second"),".").concat(s.get("milliSecond"));try{return new Date(f)}catch(t){return null}},t.throttle=function(e,n){var r=0;return function(){var t=Date.now();e<t-r&&(n.apply(this,arguments),r=t)}},t.timing=function(t){var e=performance.now(),n=t();return n instanceof Promise?n.then(function(){return performance.now()-e}):performance.now()-e},t.toLowerCase=I,t.toObject=function(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t){return t};return t.reduce(function(t,e){return t.hasOwnProperty(n(e))||(t[n(e)]=r(e)),t},{})},t.toUpperCase=function(t){return t&&"string"==typeof t?t.toUpperCase():t},t.uniqueBy=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(t){return JSON.stringify(t)},n={};return t.filter(function(t){return!n.hasOwnProperty(e(t))&&(n[e(t)]=!0)})},t.wait=S,t.waitResource=function(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=t.interval,o=void 0===e?100:e,n=t.max,i=void 0===n?10:n,a=0;return new Promise(function(t,e){var n=setInterval(function(){r()&&(clearInterval(n),t()),i<=++a&&(clearInterval(n),e(new Error("等待超时")))},o)})},t.watch=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100,r=M(e);setInterval(function(){var t=M(e);r!==t&&n(t,r),r=t},t)},t.watchEventListener=function(){var o=document.addEventListener,i=EventTarget.prototype.addEventListener,a=document.removeEventListener,u=EventTarget.prototype.removeEventListener,c=[],s=function t(e,n,r,o){g(this,t),this.el=e,this.type=n,this.listener=r,this.useCapture=o};function t(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=this===document?o:i;c.push(new s(this,t,e,n)),r.apply(this,arguments)}function e(t){var n=arguments,r=this,o=r===document?a:u,e=c.map(function(t,e){return t.el===r||t.type===n[0]?e:-1}).filter(function(t){return-1!==t});e.forEach(function(t){var e=c[t];o.apply(e.el,[e.type,e.listener,e.useCapture])}),e.sort(function(t,e){return e-t}).forEach(function(t){return c.splice(t,1)})}document.addEventListener=EventTarget.prototype.addEventListener=t,document.removeEventListenerByType=EventTarget.prototype.removeEventListenerByType=e},t.watchObject=function(t,o){var i={get:function(e,n,r){try{return new Proxy(e[n],i)}catch(t){return Reflect.get(e,n,r)}},set:function(t,e,n,r){return o(t,e,n),Reflect.set(t,e,n,r)}};return new Proxy(t,i)},Object.defineProperty(t,"__esModule",{value:!0})});

"use strict";function t(t,e){void 0===e&&(e="unknown");var r=document.createElement("a");r.download=e,r.style.display="none",r.href=URL.createObjectURL(t),document.body.appendChild(r),r.click(),document.body.removeChild(r)}Object.defineProperty(exports,"__esModule",{value:!0});var e,r=(new Map).set("http",80).set("https",443).set("ssh",22).set("ftp",21);function n(t,r){void 0===r&&(r={});var n=Object.assign({type:e.DataURL,encoding:"UTF-8"},r),o=n.type,i=n.encoding;return new Promise((function(r,n){t||n(new Error("file not exists"));var u=new FileReader;switch(u.onload=function(){r(u.result)},u.onerror=function(t){n(t)},o){case e.DataURL:u.readAsDataURL(t);break;case e.Text:u.readAsText(t,i);break;case e.BinaryString:u.readAsBinaryString(t);break;case e.ArrayBuffer:u.readAsArrayBuffer(t)}}))}!function(t){t.DataURL="readAsDataURL",t.Text="readAsText",t.BinaryString="readAsBinaryString",t.ArrayBuffer="readAsArrayBuffer"}(e||(e={}));var o=Object.assign(n,{ReadType:e,DataURL:e.DataURL,Text:e.Text,BinaryString:e.BinaryString,ArrayBuffer:e.ArrayBuffer});function i(t,e){var r={"Y+|y+":t.getFullYear(),"M+":t.getMonth()+1,"D+|d+":t.getDate(),"H+|h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),"S+":t.getMilliseconds()};for(var n in r)if(new RegExp("("+n+")").test(e))if("Y+|y+"===n)e=e.replace(RegExp.$1,(""+r[n]).substr(4-RegExp.$1.length));else if("S+"===n){var o=RegExp.$1.length;o=1===o?3:o,e=e.replace(RegExp.$1,("00"+r[n]).substr((""+r[n]).length-1,o))}else{var i=Reflect.get(r,n);e=e.replace(RegExp.$1,1===RegExp.$1.length?i:("00"+i).substr((""+i).length))}return e}var u=function(t,e){return encodeURIComponent(t)+"="+encodeURIComponent(e)};function a(t){return new Promise((function(e){if("number"==typeof t)setTimeout(e,t);else if("function"==typeof t)var r=setInterval((function(){t()&&(clearInterval(r),e())}),100);else e()}))}function c(t,e){return Promise.race([t,a(e).then((function(){throw new Error("timeout")}))])}const s=function(){function t(){}return t.prototype.then=function(e,r){const n=new t,o=this.s;if(o){const t=1&o?e:r;if(t){try{f(n,1,t(this.v))}catch(t){f(n,2,t)}return n}return this}return this.o=function(t){try{const o=t.v;1&t.s?f(n,1,e?e(o):o):r?f(n,1,r(o)):f(n,2,o)}catch(t){f(n,2,t)}},n},t}();function f(t,e,r){if(!t.s){if(r instanceof s){if(!r.s)return void(r.o=f.bind(null,t,e));1&e&&(e=r.s),r=r.v}if(r&&r.then)return void r.then(f.bind(null,t,e),f.bind(null,t,2));t.s=e,t.v=r;const n=t.o;n&&n(t)}}function l(t){return t instanceof s&&1&t.s}const h="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function p(t,e,r){for(var n;;){var o=t();if(l(o)&&(o=o.v),!o)return i;if(o.then){n=0;break}var i=r();if(i&&i.then){if(!l(i)){n=1;break}i=i.s}if(e){var u=e();if(u&&u.then&&!l(u)){n=2;break}}}var a=new s,c=f.bind(null,a,2);return(0===n?o.then(p):1===n?i.then(h):u.then(d)).then(void 0,c),a;function h(n){i=n;do{if(e&&(u=e())&&u.then&&!l(u))return void u.then(d).then(void 0,c);if(!(o=t())||l(o)&&!o.v)return void f(a,1,i);if(o.then)return void o.then(p).then(void 0,c);l(i=r())&&(i=i.v)}while(!i||!i.then);i.then(h).then(void 0,c)}function p(t){t?(i=r())&&i.then?i.then(h).then(void 0,c):h(i):f(a,1,i)}function d(){(o=t())?o.then?o.then(p).then(void 0,c):p(o):f(a,1,i)}}function d(t,e){try{var r=t()}catch(t){return e(t)}return r&&r.then?r.then(void 0,e):r}function v(t,e){try{var r=t()}catch(t){return e(!0,t)}return r&&r.then?r.then(e.bind(null,!1),e.bind(null,!0)):e(!1,r)}"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var y=function(){function t(t){var e=void 0===t?{}:t,r=e.timeout,n=e.limit,o=void 0===n?10:n;this.timeout=void 0===r?1e4:r,this.limit=o,this.execCount=0,this.waitArr=[]}return t.prototype.fetch=function(t){function e(e,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){try{var r=this;return r.waitArr.push([t,e]),Promise.resolve(a((function(){return r.execCount<r.limit}))).then((function(){return function(){try{r.execCount++;var t=r.waitArr.shift();return Promise.resolve(v((function(){return Promise.resolve(c(fetch(t[0],t[1]),r.timeout))}),(function(t,e){if(r.execCount--,t)throw e;return e})))}catch(t){return Promise.reject(t)}}()}))}catch(t){return Promise.reject(t)}})),t}();function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(t,e,r){return e&&m(t.prototype,e),r&&m(t,r),t}function w(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function S(t,e,r){return(S=b()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&x(o,r.prototype),o}).apply(null,arguments)}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function M(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return P(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function E(t){return null==t}function R(t){return t}function A(t,e){return t instanceof Promise?t.then(e):e(t)}function j(t,e,r){return A(t[0].apply(void 0,e),(function(n){if(r(n))return n;var o=t.slice(1);return 0===o.length?n:j(o,e,r)}))}var k,_=function(){function t(){}return t.and=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return j(e,r,(function(t){return!t}))}},t.or=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return j(e,r,(function(t){return t}))}},t.not=function(t){return new Proxy(t,{apply:function(t,e,r){return A(Reflect.apply(t,this,r),(function(t){return!t}))}})},t}(),O=_.and,T=_.or,I=_.not;!function(t){t.forEach="forEach",t.filter="filter",t.map="map",t.flatMap="flatMap",t.sort="sort",t.reduce="reduce",t.reduceRight="reduceRight",t.findIndex="findIndex",t.find="find",t.every="every",t.some="some",t.parallel="parallel",t.serial="serial"}(k||(k={}));var L=function(t,e){this.type=t,this.args=e,this.type=t,this.args=e};L.Type=k;var D=function(){function t(t){void 0===t&&(t=[]),this._arr=t}var e=t.prototype;return e.sort=function(t){try{var e=this;if(void 0===t)return Promise.resolve(new C(e._arr.sort()));var r=e._arr.map((function(t,e){return[t,e]}));return Promise.resolve(function t(e,r){try{var n=function(){return Promise.resolve(t(u,r)).then((function(e){var n=e.concat([i]),o=n.concat;return Promise.resolve(t(a,r)).then((function(t){return o.call(n,t)}))}))};if(e.length<=1)return Promise.resolve(e);var o=Math.floor(e.length/2),i=e[o],u=[],a=[],c=0,s=e.length,f=p((function(){return c<s}),(function(){return c++}),(function(){if(c!==o){var t=e[c];return Promise.resolve(r(t,i)).then((function(e){e<=0?u.push(t):a.push(t)}))}}));return Promise.resolve(f&&f.then?f.then(n):n())}catch(t){return Promise.reject(t)}}(r,(function(e,r){return t(e[0],r[0])}))).then((function(t){return Promise.resolve(t.map((function(t){return e._arr[t[1]]}))).then((function(t){return new C(t)}))}))}catch(t){return Promise.reject(t)}},e.find=function(t){try{var e=this;return Promise.resolve(e.findIndex(t)).then((function(t){return-1===t?null:e._arr[t]}))}catch(t){return Promise.reject(t)}},e.every=function(t){try{return Promise.resolve(this.findIndex(_.not(t))).then((function(t){return-1===t}))}catch(t){return Promise.reject(t)}},e.some=function(t){try{return Promise.resolve(this.findIndex(t)).then((function(t){return-1!==t}))}catch(t){return Promise.reject(t)}},e.parallel=function(){return new F(this._arr)},e.serial=function(){return new C(this._arr)},e.value=function(){return this._arr.slice()},t}(),C=function(t){function e(){return t.apply(this,arguments)||this}w(e,t);var r=e.prototype;return r.forEach=function(t){try{var e=this,r=0,n=e._arr.length,o=p((function(){return r<n}),(function(){return r++}),(function(){return Promise.resolve(t.call(e,e._arr[r],r,e)).then((function(){}))}));return Promise.resolve(o&&o.then?o.then((function(){})):void 0)}catch(t){return Promise.reject(t)}},r.filter=function(t){try{var r=this,n=new e,o=0,i=r._arr.length,u=p((function(){return o<i}),(function(){return o++}),(function(){return Promise.resolve(t.call(r,r._arr[o],o,r)).then((function(t){t&&n._arr.push(r._arr[o])}))}));return Promise.resolve(u&&u.then?u.then((function(){return n})):n)}catch(t){return Promise.reject(t)}},r.map=function(t){try{var r=this,n=new e,o=0,i=r._arr.length,u=p((function(){return o<i}),(function(){return o++}),(function(){var e=n._arr,i=e.push;return Promise.resolve(t.call(r,r._arr[o],o,r)).then((function(t){i.call(e,t)}))}));return Promise.resolve(u&&u.then?u.then((function(){return n})):n)}catch(t){return Promise.reject(t)}},r.flatMap=function(t){try{var r=this,n=new e,o=0,i=r._arr.length,u=p((function(){return o<i}),(function(){return o++}),(function(){var e=n._arr,i=e.push;return Promise.resolve(t.call(r,r._arr[o],o,r)).then((function(t){i.call.apply(i,[e].concat(t))}))}));return Promise.resolve(u&&u.then?u.then((function(){return n})):n)}catch(t){return Promise.reject(t)}},r.reduce=function(t,e){try{var r=this,n=0,o=r._arr.length,i=p((function(){return n<o}),(function(){return n++}),(function(){var o=function(){if(e)return Promise.resolve(t.call(r,e,r._arr[n],n,r)).then((function(t){e=t}));e=r._arr[n]}();if(o&&o.then)return o.then((function(){}))}));return Promise.resolve(i&&i.then?i.then((function(){return e})):e)}catch(t){return Promise.reject(t)}},r.reduceRight=function(t,e){try{var r=this,n=r._arr.length-1,o=p((function(){return n>=0}),(function(){return n--}),(function(){var o=function(){if(e)return Promise.resolve(t.apply(r,[e,r._arr[n],n,r])).then((function(t){e=t}));e=r._arr[n]}();if(o&&o.then)return o.then((function(){}))}));return Promise.resolve(o&&o.then?o.then((function(){return e})):e)}catch(t){return Promise.reject(t)}},r.findIndex=function(t){try{var e=function(t){return r?t:-1},r=!1,n=this,o=0,i=n._arr.length,u=p((function(){return!r&&o<i}),(function(){return o++}),(function(){return Promise.resolve(t.call(n,n._arr[o],o,n)).then((function(t){if(t)return r=!0,o}))}));return Promise.resolve(u&&u.then?u.then(e):e(u))}catch(t){return Promise.reject(t)}},e}(D),F=function(t){function e(){return t.apply(this,arguments)||this}w(e,t);var r=e.prototype;return r.forEach=function(t){try{return Promise.resolve(this._all(t)).then((function(){}))}catch(t){return Promise.reject(t)}},r.filter=function(t){try{var r=this;return Promise.resolve(r._all(t)).then((function(t){for(var n=new e,o=0,i=t.length;o<i;o++)t[o]&&n._arr.push(r._arr[o]);return n}))}catch(t){return Promise.reject(t)}},r.map=function(t){try{return Promise.resolve(this._all(t)).then((function(t){return new e(t)}))}catch(t){return Promise.reject(t)}},r.flatMap=function(t){try{return Promise.resolve(this._all(t)).then((function(t){return new e(t.flat())}))}catch(t){return Promise.reject(t)}},r.sort=function(t){throw new Error("Method not implemented.")},r.reduce=function(t,e){try{var r=this,n=0,o=r._arr.length,i=p((function(){return n<o}),(function(){return n++}),(function(){var o=function(){if(e)return Promise.resolve(t.call(r,e,r._arr[n],n,r)).then((function(t){e=t}));e=r._arr[n]}();if(o&&o.then)return o.then((function(){}))}));return Promise.resolve(i&&i.then?i.then((function(){return e})):e)}catch(t){return Promise.reject(t)}},r.reduceRight=function(t,e){try{var r=this,n=r._arr.length-1,o=p((function(){return n>=0}),(function(){return n--}),(function(){var o=function(){if(e)return Promise.resolve(t.apply(r,[e,r._arr[n],n,r])).then((function(t){e=t}));e=r._arr[n]}();if(o&&o.then)return o.then((function(){}))}));return Promise.resolve(o&&o.then?o.then((function(){return e})):e)}catch(t){return Promise.reject(t)}},r.findIndex=function(t){try{return Promise.resolve(this._all(t)).then((function(t){return t.findIndex(R)}))}catch(t){return Promise.reject(t)}},r._all=function(t){try{var e=this;return Promise.resolve(Promise.all(e._arr.map((function(r,n){return t.apply(e,[r,n,e])}))))}catch(t){return Promise.reject(t)}},e}(D),B=function(){function t(){this.length=0;for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this._arr=Array.from(e),this._tasks=[]}t.from=function(e){var r=new t;return E(e)||(r._arr=Array.from(e)),r};var e=t.prototype;return e.filter=function(t){return this._addTask(new L(L.Type.filter,[t]))},e.map=function(t){return this._addTask(new L(L.Type.map,[t]))},e.flatMap=function(t){return this._addTask(new L(L.Type.flatMap,[t]))},e.sort=function(t){return this._addTask(new L(L.Type.sort,[t]))},e.parallel=function(){return this._addTask(new L(L.Type.parallel,[]))},e.serial=function(){return this._addTask(new L(L.Type.serial,[]))},e.forEach=function(t){return this._addTask(new L(L.Type.forEach,[t])).then()},e.some=function(t){return this._addTask(new L(L.Type.some,[t])).then()},e.every=function(t){return this._addTask(new L(L.Type.every,[t])).then()},e.find=function(t){return this._addTask(new L(L.Type.find,[t])).then()},e.findIndex=function(t){return this._addTask(new L(L.Type.findIndex,[t])).then()},e.reduce=function(t,e){return this._addTask(new L(L.Type.reduce,[t,e])).then()},e.reduceRight=function(t,e){return this._addTask(new L(L.Type.reduceRight,[t,e])).then()},e.then=function(t,e){try{var r=!1,n=this;return Promise.resolve(d((function(){function e(e){return r?e:(E(t)||t(i),i)}var o=new C(n._arr),i=n._arr,u=function(t,e,r){if("function"==typeof t[h]){var n,o,i,u=t[h]();if(function t(a){try{for(;!((n=u.next()).done||r&&r());)if((a=e(n.value))&&a.then){if(!l(a))return void a.then(t,i||(i=f.bind(null,o=new s,2)));a=a.v}o?f(o,1,a):o=a}catch(t){f(o||(o=new s),2,t)}}(),u.return){var a=function(t){try{n.done||u.return()}catch(t){}return t};if(o&&o.then)return o.then(a,(function(t){throw a(t)}));a()}return o}if(!("length"in t))throw new TypeError("Object is not iterable");for(var c=[],p=0;p<t.length;p++)c.push(t[p]);return function(t,e,r){var n,o,i=-1;return function u(a){try{for(;++i<t.length&&(!r||!r());)if((a=e(i))&&a.then){if(!l(a))return void a.then(u,o||(o=f.bind(null,n=new s,2)));a=a.v}n?f(n,1,a):n=a}catch(t){f(n||(n=new s),2,t)}}(),n}(c,(function(t){return e(c[t])}),r)}(n._tasks,(function(e){return Promise.resolve(Reflect.apply(Reflect.get(o,e.type),o,e.args)).then((function(e){if(!((o=e)instanceof D))return E(t)||t(i),r=!0,o;i=o.value()}))}),(function(){return r}));return u&&u.then?u.then(e):e(u)}),(function(t){E(e)||e(t)})))}catch(t){return Promise.reject(t)}},e.value=function(){return this.then()},e[Symbol.iterator]=regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=M(this._arr);case 1:if((r=e()).done){t.next=7;break}return n=r.value,t.next=5,n;case 5:t.next=1;break;case 7:case"end":return t.stop()}}),t,this)})),e._addTask=function(e){var r=S(t,this._arr);return r._tasks=[].concat(this._tasks,[e]),r},g(t,[{key:"_arr",set:function(t){this.__arr=t,this.length=this.__arr.length},get:function(){return this.__arr}}]),t}();function U(t,e,r){return t>=e&&t<r}var N,z=/^(-?\d+)(.\d+)?$/,Y=/^-?\d+$/,$=/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/,J=/^((25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(25[0-5]|2[0-4]\d|1?\d?\d)$/,V=/^0[1-9][0-9]{1,2}-[2-8][0-9]{6,7}$/,K=/^1\d{10}$/,W=/^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$/,Z=/^\d{6}$/,q=function(){function t(){}return t.isEmpty=function(t){return E(t)||""===t},t.isBlank=function(e){return t.isEmpty(e)||""===e.trim()},t.isFloat=function(t){return!E(t)&&z.test(t)},t.isInteger=function(t){return!E(t)&&Y.test(t)},t.isEmail=function(t){return!E(t)&&$.test(t)},t.isIpv4=function(t){return!E(t)&&J.test(t)},t.isPort=function(e){return t.isInteger(e)&&U(parseInt(e),1,65535)},t.isTelephone=function(t){return!E(t)&&V.test(t)},t.isMobile=function(t){return!E(t)&&K.test(t)},t.isDomain=function(t){return!E(t)&&W.test(t)},t.isPostcode=function(t){return!E(t)&&Z.test(t)},t}(),H=q;!function(t){t[t.String=0]="String",t[t.Number=1]="Number",t[t.Boolean=2]="Boolean",t[t.Undefined=3]="Undefined",t[t.Null=4]="Null",t[t.Symbol=5]="Symbol",t[t.PropertyKey=6]="PropertyKey",t[t.Object=7]="Object",t[t.Array=8]="Array",t[t.Function=9]="Function",t[t.Date=10]="Date",t[t.File=11]="File",t[t.Blob=12]="Blob",t[t.Stream=13]="Stream",t[t.ArrayBuffer=14]="ArrayBuffer",t[t.ArrayBufferView=15]="ArrayBufferView",t[t.URLSearchParams=16]="URLSearchParams",t[t.FormData=17]="FormData"}(N||(N={}));var X=function(){function t(){}return t.getType=function(e){for(var r=0,n=Object.keys(N);r<n.length;r++){var o=n[r];if(q.isInteger(o)){var i=N[o];if(t["is"+i](e))return N[i]}}throw new Error("无法识别的类型")},t.isType=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.includes(t.getType(e))},t.isString=function(t){return"string"==typeof t},t.isNumber=function(t){return"number"==typeof t},t.isBoolean=function(t){return"boolean"==typeof t},t.isSymbol=function(t){return"symbol"==typeof t},t.isUndefined=function(t){return void 0===t},t.isNull=function(t){return null===t},t.isPropertyKey=function(e){return t.isString(e)||t.isNumber(e)||t.isSymbol(e)},t.isObject=function(e){return!t.isNull(e)&&!t.isUndefined(e)&&"object"==typeof e},t.isArray=function(t){return Array.isArray(t)},t.isFunction=function(t){return"[object Function]"===toString.call(t)},t.isDate=function(t){return"[object Date]"===toString.call(t)},t.isFile=function(t){return"[object File]"===toString.call(t)},t.isBlob=function(t){return"[object Blob]"===toString.call(t)},t.isStream=function(e){return t.isObject(e)&&t.isFunction(e.pipe)},t.isArrayBuffer=function(t){return"[object ArrayBuffer]"===toString.call(t)},t.isArrayBufferView=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},t.isURLSearchParams=function(e){return!t.isUndefined(e)&&e instanceof URLSearchParams},t.isFormData=function(e){return!t.isUndefined(e)&&e instanceof FormData},t}();function Q(t,e){var r=void 0===e?null:e;try{for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];var u=t.apply(void 0,o);return u instanceof Promise?u.catch((function(){return r})):u}catch(t){return r}}function G(t){return t instanceof Function?t:function(t){return(X.isString(t)?t.split("."):[t]).reduceRight((function(t,e){return function(r){return Q((function(){return t(Reflect.get(r,e))}))}}),R)}(t)}function tt(t,e,r,n){void 0===r&&(r=function(t,e){return t.push(e),t}),void 0===n&&(n=function(){return[]});var o=G(e);return t.reduce((function(t,e,i,u){var a=o(e,i,u);return t.has(a)||t.set(a,n()),t.set(a,r(t.get(a),e,i,u)),t}),new Map)}function et(t,e,r){void 0===r&&(r=1);for(var n=[],o=t;o<e;o+=r)n.push(o);return n}function rt(t,e,r){void 0===r&&(r=R);var n=G(e),o=G(r);return t.reduce((function(t,e,r,i){return t.set(n(e,r,i),o(e,r,i))}),new Map)}X.Type=N;var nt,ot=function(t,e,r,n){this.name=t,this.format=e,this.value=r,this.index=n},it=(new Map).set("year","Y{4}|Y{2}|y{4}|y{2}").set("month","M{1,2}").set("day","D{1,2}|d{1,2}").set("hour","h{1,2}").set("minute","m{1,2}").set("second","s{1,2}").set("millieSecond","S{1,3}"),ut=(new Map).set("month","01").set("day","01").set("hour","00").set("minute","00").set("second","00").set("millieSecond","000"),at={1:31,3:31,5:31,7:31,8:31,10:31,12:31,4:30,6:30,9:30,11:30,2:28};function ct(t,e){var r=new Date;ut.set("year",r.getFullYear().toString());for(var n,o=[],i=M(it);!(n=i()).done;){var u=n.value,a=u[0],c=new RegExp(u[1]);if(c.test(e)){var s=c.exec(e)[0],f="`".repeat(s.length),l=e.indexOf(s);e=e.replace(s,f),o.push(new ot(a,"\\d".repeat(s.length),null,l))}else o.push(new ot(a,null,ut.get(a),-1))}if(e=e.replace(new RegExp("`","g"),"\\d"),!new RegExp("^"+e+"$").test(t))return null;o.filter((function(t){return t.format})).sort((function(t,e){return t.index-e.index})).map((function(e){var r=new RegExp(e.format).exec(t);return null!==r&&r.length>0&&(t=t.replace(r[0],""),e.value=r[0]),e})).forEach((function(e,r){var n=new RegExp(e.format).exec(t);null!==n&&n.length>0&&(t=t.replace(n[0],""),o[r].value=n[0])}));var h=rt(o,(function(t){return t.name}),(function(t){return t.value}));2===h.get("year").length&&h.set("year",ut.get("year").substr(0,2).concat(h.get("year")));var p=function(t){return parseInt(h.get(t))},d=p("year"),v=p("month"),y=p("day"),m=p("hour"),g=p("minute"),w=p("second"),x=p("millieSecond");return U(v,1,13)&&U(y,1,Reflect.get(at,v)+(2===v&&d%4==0?1:0)+1)&&U(m,0,25)&&U(g,0,61)&&U(w,0,61)&&U(x,0,1e3)?new Date(d,v-1,y,m,g,w,x):null}function st(t){return t.selectionStart}function ft(t,e,r){void 0===r&&(r=e),t.focus(),t.setSelectionRange(e,r)}function lt(t){return E(t)||"string"!=typeof t?t:t.toLowerCase()}function ht(){return nt}var pt=Object.assign(ht,{init:function(){document.addEventListener("focus",(function(t){nt=t.target}),!0),document.addEventListener("blur",(function(){nt=null}),!0)}});function dt(t){return E(t)?"":t instanceof Date?t.toISOString():t.toString()}var vt=function(){function t(){this.classMap=new Map}t.getFactory=function(){return new t};var e=t.prototype;return e.register=function(t,e){return this.classMap.set(t,e),e},e.getInstance=function(t){var e=this.classMap.get(t);if(!e)return null;for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return S(e,n)},e[Symbol.iterator]=regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=M(this.classMap.entries());case 1:if((r=e()).done){t.next=7;break}return n=r.value,t.next=5,n;case 5:t.next=1;break;case 7:case"end":return t.stop()}}),t,this)})),t}();function yt(t){var e=performance.now();return A(t(),(function(){return performance.now()-e}))}function mt(t){return E(t)||"string"!=typeof t?t:t.toUpperCase()}function gt(t){return q.isBlank(t)?null:t}function wt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var o=new Set(r);return Object.keys(t).reduce((function(e,r){return o.has(r)||Reflect.set(e,r,Reflect.get(t,r)),e}),{})}var xt=function(){function t(){}return t.dayStart=function(t){return void 0===t&&(t=new Date),new Date(i(t,"yyyy-MM-dd")+"T00:00:00.000")},t.dayEnd=function(t){return void 0===t&&(t=new Date),new Date(i(t,"yyyy-MM-dd")+"T23:59:59.999")},t.monthStart=function(t){return void 0===t&&(t=new Date),new Date(i(t,"yyyy-MM")+"-01T00:00:00.000")},t.monthEnd=function(t){return void 0===t&&(t=new Date),new Date(i(t,"yyyy-MM")+"-"+function(t){var e=[[new Set([1,3,5,7,8,10,12]),30],[new Set([4,6,9,11]),30],[new Set([2]),28]],r=t.getFullYear(),n=t.getMonth()+1;return e.find((function(t){return t[0].has(n)}))[1]+(2===n&&r%4==0?1:0)}(t)+"T23:59:59.999")},t.yearStart=function(t){return void 0===t&&(t=new Date),new Date(t.getFullYear()+"-01-01T00:00:00.000")},t.yearEnd=function(t){return void 0===t&&(t=new Date),new Date(t.getFullYear()+"-12-31T23:59:59.999")},t}(),bt=xt,St=function(){function t(t){this.date=t}var e=t.prototype;return e.year=function(){return this.date.getFullYear()},e.month=function(){return this.date.getMonth()},e.monthOfYear=function(){return this.date.getMonth()+1},e.dayOfYear=function(){return Math.ceil((this.date.getTime()-bt.yearStart(this.date).getTime())/864e5)},e.dayOfMonth=function(){return this.date.getDate()},e.dayOfWeek=function(){return this.date.getDay()},e.weekOfYear=function(){return Math.ceil(this.dayOfYear()/7)},e.weekOfMonth=function(){return Math.ceil(this.dayOfMonth()/7)},e.quarter=function(){var t=this.month();return U(t,0,3)?1:U(t,3,6)?2:U(t,6,9)?3:4},e.hour=function(){return this.date.getHours()},e.minute=function(){return this.date.getMinutes()},e.second=function(){return this.date.getSeconds()},e.milliSecond=function(){return this.date.getMilliseconds()},t}();function Pt(t){return new St(t)}var Mt=function(){function t(t,e){this.start=t,this.end=e}var e=t.prototype;return e.milliSecond=function(){return this.end.getTime()-this.start.getTime()},e.second=function(){return Math.floor(this.milliSecond()/1e3)},e.minute=function(){return Math.floor(this.second()/60)},e.hour=function(){return Math.floor(this.minute()/60)},e.day=function(){return Math.floor(this.hour()/24)},e.month=function(){return 12*this.year()+(this.end.getMonth()-this.start.getMonth())},e.year=function(){return this.end.getFullYear()-this.start.getFullYear()},t}();function Et(t,e,r){void 0===r&&(r=R);var n=G(r),o=new Set(t.map(n)),i=new Set(e.map(n)),u=t.filter((function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return!i.has(n.apply(void 0,[t].concat(r)))})),a=e.filter((function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return!o.has(n.apply(void 0,[t].concat(r)))})),c=new Set(u.map(n));return{left:u,right:a,common:t.filter((function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return!c.has(n.apply(void 0,[t].concat(r)))}))}}var Rt=Et,At=regeneratorRuntime.mark(jt);function jt(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:return e.next=3,t;case 3:t++,e.next=1;break;case 6:case"end":return e.stop()}}),At)}var kt,_t=jt(),Ot=function(){function t(){}var e=t.prototype;return e.from=function(t){throw new Error("子类必须重写 from 函数")},e.to=function(t){throw new Error("子类必须重写 to 函数")},t}(),Tt=function(t){function e(){return t.apply(this,arguments)||this}return w(e,t),e.prototype.from=function(t){for(var e=[],r=t.length,n=0,o=0;o<r;o++){var i=t.charAt(o);i>="A"&&i<="Z"&&(0!==o&&e.push(t.substring(n,o)),n=o)}return n!==t.length&&e.push(t.substring(n,t.length)),e},e}(Ot),It=function(t){function e(){return t.apply(this,arguments)||this}return w(e,t),e.prototype.to=function(t){return t.reduce((function(t,e,r){var n=lt(e);return t+((0===r?lt:mt)(n.substring(0,1))+n.substring(1))}),"")},e}(Tt),Lt=function(t){function e(){return t.apply(this,arguments)||this}return w(e,t),e.prototype.to=function(t){return t.reduce((function(t,e){var r=lt(e);return t+(mt(r.substring(0,1))+r.substring(1))}),"")},e}(Tt),Dt=function(t){function e(){return t.apply(this,arguments)||this}return w(e,t),e.prototype.from=function(t){return t.split("_")},e}(Ot),Ct=function(t){function e(){return t.apply(this,arguments)||this}return w(e,t),e.prototype.to=function(t){return t.map(lt).join("_")},e}(Dt),Ft=function(t){function e(){return t.apply(this,arguments)||this}return w(e,t),e.prototype.to=function(t){return t.map(mt).join("_")},e}(Dt);(kt=exports.StringStyleType||(exports.StringStyleType={}))[kt.Camel=1]="Camel",kt[kt.Pascal=2]="Pascal",kt[kt.Snake=3]="Snake",kt[kt.ScreamingSnake=4]="ScreamingSnake";var Bt,Ut=function(){function t(){}return t.getInstance=function(t){switch(t){case exports.StringStyleType.Camel:return new It;case exports.StringStyleType.Pascal:return new Lt;case exports.StringStyleType.Snake:return new Ct;case exports.StringStyleType.ScreamingSnake:return new Ft;default:throw new Error("No corresponding converter found")}},t}(),Nt=function(){function t(t,e){this.fromConverter=Ut.getInstance(t),this.toConverter=Ut.getInstance(e)}return t.prototype.convert=function(t){return H.isEmpty(t)?t:this.toConverter.to(this.fromConverter.from(t))},t}(),zt=function(){function t(t){var e=(void 0===t?{}:t).limit,r=void 0===e?Infinity:e;if(this.cache=new Map,r<=0)throw new Error("缓存的最大容量至少为 1");this.limit=r}var e=t.prototype;return e.delete=function(t){this.cache.delete(t)},e.clear=function(){this.cache.clear()},g(t,[{key:"size",get:function(){return this.cache.size}}]),t}(),Yt=function(t){function e(){return t.apply(this,arguments)||this}w(e,t);var r=e.prototype;return r.add=function(t,e){var r=this,n=this.cache.size+1-this.limit;n>0&&[].concat(this.cache.keys()).slice(0,n).forEach((function(t){return r.delete(t)})),this.cache.set(t,e)},r.delete=function(t){this.cache.delete(t)},r.get=function(t){return this.cache.get(t)},r.has=function(t){return this.cache.has(t)},g(e,[{key:"size",get:function(){return this.cache.size}}]),e}(zt),$t=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).lfuMap=new Map,e}w(e,t);var r=e.prototype;return r.add=function(t,e){var r=this,n=this.cache.size+1-this.limit;n>0&&[].concat(this.cache.keys()).sort((function(t,e){return r.lfuMap.get(t)-r.lfuMap.get(e)})).slice(0,n).forEach((function(t){return r.delete(t)})),this.cache.set(t,e),this.lfuMap.set(t,0)},r.get=function(t){return this.lfuMap.set(t,this.lfuMap.get(t)+1),this.cache.get(t)},r.has=function(t){return this.lfuMap.set(t,this.lfuMap.get(t)+1),this.cache.has(t)},r.delete=function(e){t.prototype.delete.call(this,e),this.lfuMap.delete(e)},r.clear=function(){t.prototype.clear.call(this),this.lfuMap.clear()},e}(zt),Jt=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).i=0,e.lruMap=new Map,e}w(e,t);var r=e.prototype;return r.add=function(t,e){var r=this,n=this.cache.size+1-this.limit;if(n>0){var o=[].concat(this.cache.keys()).sort((function(t,e){return r.lruMap.get(t)-r.lruMap.get(e)})).slice(0,n);console.log(o,this.lruMap),o.forEach((function(t){return r.delete(t)}))}this.cache.set(t,e),this.lruMap.set(t,this.idx)},r.get=function(t){return this.lruMap.set(t,this.idx),this.cache.get(t)},r.has=function(t){return this.lruMap.set(t,this.idx),this.cache.has(t)},r.delete=function(e){t.prototype.delete.call(this,e),this.lruMap.delete(e)},r.clear=function(){t.prototype.clear.call(this),this.lruMap.clear()},g(e,[{key:"idx",get:function(){return this.i++}}]),e}(zt);(Bt=exports.MemoryCacheEnum||(exports.MemoryCacheEnum={}))[Bt.Fifo=0]="Fifo",Bt[Bt.Lfu=1]="Lfu",Bt[Bt.Lru=2]="Lru";var Vt=function(){function t(){}return t.create=function(t,e){switch(t){case exports.MemoryCacheEnum.Fifo:return new Yt(e);case exports.MemoryCacheEnum.Lfu:return new $t(e);case exports.MemoryCacheEnum.Lru:return new Jt(e)}},t}(),Kt=function(t,e){return"onceOfSameParam-"+t.toString()+"-"+JSON.stringify(e)};function Wt(t,e,r){void 0===e&&(e=Kt),void 0===r&&(r=Vt.create(exports.MemoryCacheEnum.Fifo));var n=new Proxy(t,{apply:function(n,o,i){var u=e(t,i),a=r.get(u);return void 0!==a?a:A(Reflect.apply(n,o,i),(function(t){return r.add(u,t),t}))}});return Object.assign(n,{origin:t,clear:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.length?r.clear():e.forEach((function(t){return r.delete(t)}))}})}var Zt=Object.assign(Wt,{identity:Kt}),qt=Zt((function(t,e){return new Nt(t,e)})),Ht=function(){function t(){}return t.getConverter=function(t,e){return qt(t,e)},t.convert=function(e,r,n){return t.getConverter(e,r).convert(n)},t}();function Xt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var o=r.filter((function(t){return t!==Xt._}));if(o.length>=t.length)return t.apply(void 0,o);function i(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=new Set,u=0,a=r.map((function(t){return t!==Xt._||void 0===n[u]||n[u]===Xt._?t:(i.add(u),n[u++])})),c=n.filter((function(t,e){return!i.has(e)}));return Xt.apply(void 0,[t].concat(a,c))}return i._length=t.length-r.filter((function(t){return t!==Xt._})).length,i.toString=function(){return"name: "+t.name+", args: ["+r.map((function(t){return t.toString()})).join(", ")+"]"},i._curry=!0,i}Xt._=Symbol("_");var Qt=function(){function t(t){this.fmt=t}var e=t.prototype;return e.format=function(t){return E(t)?"":i(t,this.fmt)},e.parse=function(t){return H.isEmpty(t)?null:ct(t,this.fmt)},e.strFormat=function(t,e){return H.isEmpty(t)?"":i(e?ct(t,e):new Date(t),this.fmt)},t}();function Gt(t,e,r){void 0===r&&(r=1);for(var n=0,o=0,i=t.length;o<i;o++)if(e.call(t,t[o],o,t)&&++n>=r)return o;return-1}Qt.dateFormatter=new Qt("yyyy-MM-dd"),Qt.timeFormatter=new Qt("hh:mm:ss"),Qt.dateTimeFormatter=new Qt("yyyy-MM-dd hh:mm:ss");var te=function t(e,r){return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var u=Gt(o,(function(t){return t!==Xt._}),e._length||e.length),a=Xt.apply(void 0,[e].concat(o));return-1===u?t(a,r):Xt.apply(void 0,[r,a].concat(o.slice(u+1)))}};function ee(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(X.isArray(t))return t.map((function(t){return ee.apply(void 0,[t].concat(r))}));if(X.isDate(t))return t;if(X.isObject(t)){var o=wt.apply(void 0,[t].concat(r));return Object.keys(o).reduce((function(t,e){var n=Reflect.get(t,e);return Reflect.set(t,e,ee.apply(void 0,[n].concat(r))),t}),o)}return t}var re=function(t){void 0===t&&(t={}),Object.assign(this,t)},ne=function(){function t(t){var e=void 0===t?{}:t,r=e.timeout,n=e.serialize,o=void 0===n?JSON.stringify:n,i=e.deserialize,u=void 0===i?JSON.parse:i;this.cacheOption={timeout:void 0===r?"TimeoutInfinite":r,serialize:o,deserialize:u},this.localStorage=window.localStorage,this.clearExpired()}var e=t.prototype;return e.clearExpired=function(){try{var t=this.localStorage;return function(){for(var e=t.length,r=[],n=0;n<e;n++)r.push(t.key(n));return r}().filter(I(E)).map((function(e){return Q((function(){return JSON.parse(t.getItem(e))}))})).filter((function(t){return!E(t)&&E(t.cacheOption)})).filter((function(t){var e=t.cacheOption,r=void 0===e?{}:e,n=r.timeStart,o=r.timeout;return!E(n)&&!E(o)&&"TimeoutInfinite"!==o&&Date.now()-n>o})).forEach((function(e){return t.removeItem(e.key)})),Promise.resolve()}catch(t){return Promise.reject(t)}},e.add=function(t,e,r){null===this.get(t)&&this.set(t,e,r)},e.del=function(t){this.localStorage.removeItem(t)},e.set=function(t,e,r){this.localStorage.setItem(t,JSON.stringify(new re({key:t,val:this.cacheOption.serialize(e),cacheOption:{timeStart:Date.now(),timeout:r||this.cacheOption.timeout}})))},e.get=function(t){var e=this.localStorage.getItem(t),r=Q((function(){return JSON.parse(e)}));if(E(r)||E(r.cacheOption))return null;var n=[r.cacheOption.timeStart,r.cacheOption.timeout,this.cacheOption.deserialize],o=n[0],i=n[1],u=n[2];if("TimeoutInfinite"!==i&&Date.now()-o>i)return this.del(t),null;try{return u(r.val)}catch(e){return this.del(t),null}},e.touch=function(t){var e=this.localStorage.getItem(t),r=Q((function(){return JSON.parse(e)}));if(E(r)||E(r.cacheOption))return null;var n=[r.cacheOption.timeStart,r.cacheOption.timeout,this.cacheOption.deserialize],o=n[0],i=n[1],u=n[2];if("TimeoutInfinite"!==i&&Date.now()-o>i)return this.del(t),null;try{var a=u(r.val);return this.set(t,a,{timeStart:Date.now(),timeout:i}),a}catch(e){return this.del(t),null}},t}(),oe=new ne,ie=function(){function t(){}return t.once=function(t,e){var r=void 0===e?{}:e,n=r.identity,o=void 0===n?t.toString():n,i=r.timeout,u=function(){return"CacheUtil.onceOfSameParam-"+o},a=new Proxy(t,{apply:function(t,e,r){var n=u(),o=oe.get(n);return null!==o?o:A(Reflect.apply(t,e,r),(function(t){return oe.set(n,t,i),t}))}});return Object.assign(a,{origin:t,clear:function(){oe.del(u())}})},t.onceOfSameParam=function(t,e){var r=void 0===e?{}:e,n=r.identity,o=void 0===n?t.toString():n,i=r.timeout,u=function(t){return"CacheUtil.onceOfSameParam-"+o+"-"+JSON.stringify(t)},a=new Proxy(t,{apply:function(t,e,r){var n=u(r),o=oe.get(n);return null!==o?o:A(Reflect.apply(t,e,r),(function(t){return oe.set(n,t,i),t}))}});return Object.assign(a,{origin:t,clear:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];oe.del(u(e))}})},t}(),ue=ie;function ae(){}var ce=function(){function t(){}return t.cyclingDebugger=function(){var t=setInterval((function(){}),100);return function(){return clearInterval(t)}},t.checkDebug=function(t){void 0===t&&(t=function(){return window.location.reload()});var e=setInterval((function(){var e=yt((function(){}));e>500&&(console.log(e),t())}),1e3);return function(){return clearInterval(e)}},t.disableConsoleOutput=function(){if(!window.console)return ae;var t=rt(Object.keys(console),R,(function(t){var e=console[t];return console[t]=ae,e}));return function(){for(var e,r=M(t);!(e=r()).done;){var n=e.value;console[n[0]]=n[1]}}},t}(),se=ce,fe=function(){function t(){}return t.isEmpty=function(t){return E(t)||!(t instanceof Array)||0===t.length},t}(),le=fe,he=function(){function t(){}return t.join=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.reduce(t._join)},t._join=function(e,r){return e.endsWith(t.Separator)?(e+r).replace(t.Separator+t.Separator,t.Separator):r.startsWith(t.Separator)?e+r:e+t.Separator+r},t}();he.Separator="/";var pe,de=he;!function(t){t[t.Debug=0]="Debug",t[t.Log=1]="Log",t[t.Info=2]="Info",t[t.Warn=3]="Warn",t[t.Error=4]="Error"}(pe||(pe={}));var ve={debug:pe.Debug,log:pe.Log,info:pe.Info,warn:pe.Warn,error:pe.Error},ye=function(){function t(t){var e=void 0===t?{}:t,r=e.enable,n=void 0===r||r,o=e.level,i=void 0===o?pe.Log:o;this.debug=console.debug,this.log=console.log,this.info=console.info,this.warn=console.warn,this.error=console.error,this.dir=console.dir,this.dirxml=console.dirxml,this.table=console.table,this.trace=console.trace,this.group=console.group,this.groupCollapsed=console.groupCollapsed,this.groupEnd=console.groupEnd,this.clear=console.clear,this.count=console.count,this.assert=console.assert,this.time=console.time,this.timeEnd=console.timeEnd,this.timeStamp=console.timeStamp,this.enable=n,this.level=i}return g(t,[{key:"enable",set:function(t){var e=this;Object.keys(console).forEach((function(r){return Reflect.set(e,r,t?console[r]:ae)}))}},{key:"level",set:function(t){var e=this;Object.keys(console).filter((function(t){return Reflect.has(ve,t)})).forEach((function(r){return Reflect.set(e,r,Reflect.get(ve,r)>=t?console[r]:ae)}))}}]),t}();ye.Level=pe;var me=new ye;function ge(t){return function(e){return new Proxy(e,{get:function(e,r){return Reflect.has(t,r)?Reflect.get(e,Reflect.get(t,r)):Reflect.get(e,r)},set:function(e,r,n){return Reflect.has(t,r)?(Reflect.set(e,Reflect.get(t,r),n),!0):(Reflect.set(e,r,n),!0)}})}}function we(t,e){var r=void 0===e?{}:e,n=r.before,o=void 0===n?R:n,i=r.after,u=void 0===i?R:i,a=r.paramFn,c=void 0===a?function(t){return[]}:a;return function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a=o.apply(void 0,[e].concat(n)),s=a.child;return le.isEmpty(s)||(a.child=s.map((function(e){return t.apply(void 0,[e].concat(c.apply(void 0,[a].concat(n))))}))),u.apply(void 0,[a].concat(n))}(t)}var xe=function(){function t(){}return t.bridge=function(t){var e=void 0===t?{}:t,r=e.id,n=e.parentId,o=e.child,i=e.path;return ge({id:void 0===r?"id":r,parentId:void 0===n?"parentId":n,child:void 0===o?"child":o,path:void 0===i?"path":i})},t.bridgeTree=function(t,e){return we(t,{before:this.bridge(e)})},t.bridgeList=function(t,e){return t.map(this.bridge(e))},t}(),be=xe;function Se(t,e){var r=function(t){return t instanceof Function?/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/:/^(?:toString|length)$/}(e);return Reflect.ownKeys(e).forEach((function(n){"string"==typeof n&&r.test(n)||Reflect.set(t,n,Reflect.get(e,n))})),t}var Pe=function(){return!1},Me=function(){function t(t){var e=void 0===t?{}:t,r=e.limit,n=e.timeout;this.limit=void 0===r?1:r,this.timeout=n||Pe}var e=t.prototype;return e.isLocked=function(){return this.limit<=0},e.lock=function(t){try{var e=this;void 0===t&&(t=e.timeout);var r=function(){if(e.isLocked())return Promise.resolve(Promise.race([a((function(){var t=!e.isLocked();return t&&e.limit--,t})),a(t)])).then((function(){}));e.limit--}();return Promise.resolve(r&&r.then?r.then((function(){})):void 0)}catch(t){return Promise.reject(t)}},e.unlock=function(){this.limit++},t}(),Ee=function(){function t(){this.subMap=new Map}var e=t.prototype;return e.pub=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var o=this.subMap.get(t);void 0!==o&&o.forEach((function(t){return t.apply(void 0,r)}))},e.sub=function(t,e){this.subMap.has(t)||this.subMap.set(t,[]),this.subMap.get(t).push(e)},e.unsub=function(t,e){if(void 0!==e){if(this.subMap.has(t)){var r=this.subMap.get(t);r.splice(r.indexOf(e),1)}}else this.subMap.delete(t)},t}();function Re(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var o=r.filter((function(t){return t!==Re._}));if(o.length>=t.length)return t.apply(void 0,o);function i(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=new Set,u=0,a=r.map((function(t){return t!==Re._||void 0===n[u]||n[u]===Re._?t:(i.add(u),n[u++])})),c=n.filter((function(t,e){return!i.has(e)}));return Re.apply(void 0,[t].concat(a,c))}return i._length=t.length-r.filter((function(t){return t!==Re._})).length,i.toString=function(){return"name: "+t.name+", args: ["+r.map((function(t){return t.toString()})).join(", ")+"]"},i._partial=!0,i}Re._=Symbol("_");var Ae=function(){function t(){}return t.add=function(e,r,n,o){t.listenerMap.has(e)||t.listenerMap.set(e,[]),t.listenerMap.get(e).push({type:r,listener:n,options:o}),e.addEventListener(r,n,o)},t.remove=function(e,r,n,o){e.removeEventListener(r,n,o),t.listenerMap.set(e,(t.listenerMap.get(e)||[]).filter((function(t){return t.type!==r||t.listener!==n||t.options!==o})))},t.removeByType=function(e,r,n){var o=t.listenerMap.get(e);if(void 0===o)return[];var i=tt(o,(function(t){return r===t.type&&n===t.options})),u=i.get(!0)||[],a=i.get(!0)||[];return t.listenerMap.set(e,a),u.map((function(t){return e.removeEventListener(t.type,t.listener,t.options),t}))},t}();function je(t){return(t>=10?"":"0")+t}Ae.listenerMap=new Map;var ke=function(){function t(){}return t.format=function(t){var e=t%60,r=Math.floor(t/60)%60;return je(Math.floor(t/60/60))+":"+je(r)+":"+je(e)},t.parse=function(t){var e=/(\d+):(\d+):(\d+)/.exec(t),r=e[2],n=e[3];return 60*parseInt(e[1])*60+60*parseInt(r)+parseInt(n)},t}(),_e=function(){function t(){this.events=new Map}var e=t.prototype;return e.add=function(t,e){var r=this.events.get(t)||[];return r.push(e),this.events.set(t,r),this},e.remove=function(t,e){var r=this.events.get(t)||[];return this.events.set(t,r.filter((function(t){return t!==e}))),this},e.removeByType=function(t){return this.events.delete(t),this},e.emit=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var o=this.events.get(t)||[];return o.forEach((function(t){t.apply(void 0,r)})),this},e.listeners=function(t){return Object.freeze(this.events.get(t)||[])},t}(),Oe=function(){function t(){this.tasks=[],this.lock=!1}var e=t.prototype;return e.add=function(t){return this.tasks.push(t),this.execute(),this},e.execute=function(){var t=this;this.lock||(this.lock=!0,Promise.resolve().then((function e(){t.tasks.length?A(t.tasks.shift()(),(function(){return e()})):t.lock=!1})))},t}(),Te="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Ie=Te.length;function Le(t){return t.split(new RegExp("[\\.\\[]")).map((function(t){return new RegExp("\\]$").test(t)?t.slice(0,t.length-1):t}))}var De=function(){function t(t){var e=this;this.storage=t,this.clear=function(){e.storage.clear()},this.getItem=function(t){return e.storage.getItem(t)},this.key=function(t){return e.storage.key(t)},this.removeItem=function(t){e.storage.removeItem(t)},this.setItem=function(t,r){e.storage.setItem(t,r)}}return g(t,[{key:"length",get:function(){return this.storage.length}}]),t}();exports.AntiDebug=ce,exports.ArrayValidator=fe,exports.AsyncArray=B,exports.CacheUtil=ie,exports.CombinedPredicate=_,exports.DateConstants=xt,exports.DateFormatter=Qt,exports.EventEmitter=_e,exports.EventUtil=Ae,exports.FetchLimiting=y,exports.LocalStorageCache=ne,exports.Locker=Me,exports.Logger=ye,exports.MemoryCacheFactory=Vt,exports.MicrotaskQueue=Oe,exports.NodeBridgeUtil=xe,exports.PathUtil=he,exports.PubSubMachine=Ee,exports.StateMachine=vt,exports.Stopwatch=ke,exports.StringStyleUtil=Ht,exports.StringValidator=q,exports.TypeValidator=X,exports.aggregation=function(t){var e=Array.from(t),r=function(){for(var t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.forEach((function(e){var r=e[1];return Se(t,S(e[0],(void 0===r?R:r)(n)))}))};return e.forEach((function(t){var e=t[0];Se(r.prototype,e.prototype),Se(r,e)})),r},exports.and=O,exports.antiDebug=se,exports.appends=function(t,e){for(var r in e)t.append(r,dt(e[r]));return t},exports.arrayDiffBy=Rt,exports.arrayToMap=rt,exports.arrayValidator=le,exports.asIterator=function(t){for(var e=[];;){var r=t.next();if(r.done)break;e.push(r.value)}return e},exports.assign=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return[t].concat(r).reduce((function(t,e){return E(e)?t:Object.keys(e).reduce((function(t,r){var n=Reflect.get(e,r);return E(n)||Reflect.set(t,r,n),t}),t)}),{})},exports.async=function(t){return new Proxy(t,{apply:function(t,e,r){try{return Promise.resolve(Reflect.apply(t,e,r))}catch(t){return Promise.reject(t)}}})},exports.asyncFlatMap=function(t,e){try{return Promise.resolve(S(B,t).flatMap(e))}catch(t){return Promise.reject(t)}},exports.asyncLimiting=function(t,e){var r=(void 0===e?{}:e).limit,n=void 0===r?1:r,o=0,i=[],u=!1;return new Proxy(t,{apply:function(t,e,r){try{return i.push(r),Promise.resolve(a((function(){var t=o<n;return t&&(u=!0,o++),t}))).then((function(){return function(){try{u||(o++,u=!1);var r=i.shift();return Promise.resolve(v((function(){return Promise.resolve(Reflect.apply(t,e,r))}),(function(t,e){if(o--,t)throw e;return e})))}catch(t){return Promise.reject(t)}}()}))}catch(t){return Promise.reject(t)}}})},exports.autoIncrement=function(){return _t.next().value},exports.batch=function(t,e){void 0===e&&(e=0);var r=new Map,n=new Map,o=!1;return function(){try{for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];var s=JSON.stringify(u);return n.set(s,(n.get(s)||0)+1),Promise.resolve(Promise.all([a((function(){return r.has(s)||!o})),a(e)])).then((function(){function e(){var t=r.get(s);if(n.set(s,n.get(s)-1),(n.get(s)||0)<=0&&(n.delete(s),r.delete(s)),t instanceof Error)throw r.delete(s),t;return t}var i=function(){if(!r.has(s)){var e=v((function(){return o=!0,Promise.resolve(t(Array.from(n.keys()).map((function(t){return JSON.parse(t)})))).then((function(t){Array.from(t).forEach((function(t){var e=t[1];r.set(JSON.stringify(t[0]),e)}))}))}),(function(t,e){if(o=!1,t)throw e;return e}));if(e&&e.then)return e.then((function(){}))}}();return i&&i.then?i.then(e):e()}))}catch(t){return Promise.reject(t)}}},exports.blankToNull=gt,exports.blankToNullField=function(t){return Object.keys(t).reduce((function(e,r){var n=Reflect.get(t,r);return Reflect.set(e,r,"string"==typeof n?gt(n):n),e}),{})},exports.bridge=ge,exports.cacheUtil=ue,exports.compare=function t(e,r){if(("number"==typeof e||e instanceof Number)&&("number"==typeof r||r instanceof Number)){var n=+e,o=+r;if(isNaN(n)&&isNaN(o))return!0;if(n===o)return 1/n==1/o;if(Math.abs(n-o)<Number.EPSILON)return!0}if(e===r)return!0;if(e instanceof RegExp&&r instanceof RegExp||("string"==typeof e||e instanceof String)&&("string"==typeof r||r instanceof String))return e.toString()===r.toString();if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(!(e instanceof Object&&r instanceof Object))return!1;if(e.prototype!==r.prototype)return!1;if(e.constructor!==r.constructor)return!1;for(var i=0,u=Object.keys(r);i<u.length;i++)if(!Reflect.has(e,u[i]))return!1;for(var a=0,c=Object.keys(e);a<c.length;a++){var s=c[a];if(!Reflect.has(r,s))return!1;if(typeof r[s]!=typeof e[s])return!1;if(!t(e[s],r[s]))return!1}return!0},exports.compatibleAsync=A,exports.compose=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduceRight((function(t,e){return te(e,t)}))},exports.concatMap=function(t){var e=0,r=new Set;return new Proxy(t,{apply:function(t,n,o){try{var i=e;return r.add(i),e++,Promise.resolve(a((function(){return!r.has(i-1)}))).then((function(){return Promise.resolve(Reflect.apply(t,n,o)).then((function(t){return r.delete(i),t}))}))}catch(t){return Promise.reject(t)}}})},exports.copyText=function(t){var e=document.createElement("textarea");e.style.position="fixed",e.style.top="-1000px",document.body.appendChild(e),e.value=t,e.select();var r=document.execCommand("copy");return document.body.removeChild(e),r},exports.createElByString=function(t){var e=document.createElement("div");return e.innerHTML=t,e.querySelector("*")},exports.curry=Xt,exports.dateBetween=function(t,e){return new Mt(t,e)},exports.dateConstants=bt,exports.dateEnhance=Pt,exports.dateFormat=i,exports.dateParse=ct,exports.debounce=function(t,e,r){var n;void 0===r&&(r=null);var o=r;return new Proxy(e,{apply:function(e,r,i){return new Promise((function(u){n&&clearTimeout(n),n=setTimeout((function(){return u(o=Reflect.apply(e,r,i))}),t),setTimeout((function(){return u(o)}),t)}))}})},exports.deepExcludeFields=ee,exports.deepFreeze=function t(e){var r=function(e){X.isObject(e)&&t(e)};return X.isArray(e)?e.forEach(r):X.isObject(e)&&Object.keys(e).map((function(t){return Reflect.get(e,t)})).forEach(r),Object.freeze(e)},exports.deepProxy=function(t,e){void 0===t&&(t={}),void 0===e&&(e=new String);var r={get:function(t,n){var o=Reflect.get(t,n);return E(o)&&(o=e),X.isFunction(o)?o.bind(t):X.isObject(o)?new Proxy(o,r):o}};return new Proxy(t,r)},exports.deletes=function(t,e){return e.forEach((function(e){return t.delete(e)})),t},exports.deny=function(t){return _.not(t)},exports.diffBy=Et,exports.download=t,exports.downloadString=function(e,r){void 0===r&&(r="unknown.txt");try{return t(function(t){return new Blob([t],{type:"text/plain"})}(e),r),Promise.resolve()}catch(t){return Promise.reject(t)}},exports.downloadUrl=function(t,e){try{void 0===e&&(e=t.substr(t.lastIndexOf("/")));var r=document.createElement("a");return r.download=e,r.style.display="none",r.href=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),Promise.resolve()}catch(t){return Promise.reject(t)}},exports.emptyAllField=function(t){return Object.keys(t).reduce((function(t,e){return Reflect.set(t,e,null),t}),{})},exports.emptyFunc=ae,exports.excludeFields=wt,exports.excludeFieldsDeep=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return ee.apply(void 0,[t].concat(r))},exports.extractFieldMap=function(t,e){return t.reduce((function(t,e){for(var r,n=M(t);!(r=n()).done;){var o=r.value;o[1].push(Reflect.get(e,o[0]))}return t}),rt(e,(function(t){return t}),(function(){return new Array})))},exports.fetchTimeout=c,exports.fill=function t(e,r){return r<=0?"":e+t(e,r-1)},exports.filterItems=function(t,e,r){void 0===r&&(r=R);var n=G(r),o=new Set(e.map(n));return t.filter((function(t,e,r){return!o.has(n(t,e,r))}))},exports.findIndex=Gt,exports.flatMap=function(t,e){void 0===e&&(e=function(t){return Array.from(t)});var r=G(e);return t.reduce((function(t,e,n,o){return t.push.apply(t,r(e,n,o)),t}),new Array)},exports.floatEquals=function(t,e){return Math.abs(t-e)<Number.EPSILON},exports.formDataToArray=function(t){return Array.from(t)},exports.format=function(t,e){return Object.keys(e).reduce((function(t,r){return t.replace(new RegExp("{"+r+"}","g"),dt(e[r]))}),t)},exports.get=function(t,e,r){void 0===r&&(r=null),X.isString(e)&&(e=Le(e));for(var n,o=t,i=M(e);!(n=i()).done;){var u=n.value;try{if(E(o=Reflect.get(o,u)))return r}catch(t){return r}}return o},exports.getCookies=function(){return document.cookie.split(";").reduce((function(t,e){var r=e.split("=");return t.set(r[0],r[1]),t}),new Map)},exports.getCursorPosition=st,exports.getCusorPostion=function(t){return st(t)},exports.getKFn=G,exports.getMousePos=function(t){var e=document.documentElement.scrollLeft||document.body.scrollLeft,r=document.documentElement.scrollTop||document.body.scrollTop;return{x:t.pageX||t.clientX+e,y:t.pageY||t.clientY+r}},exports.getObjectEntries=function(t){return Reflect.ownKeys(t).map((function(e){return[e,Reflect.get(t,e)]}))},exports.getObjectKeys=function(t){return E(t)?[]:Reflect.ownKeys(t)},exports.getSelectText=function(){return getSelection().toString()},exports.getYearWeek=function(t){return Pt(t).weekOfYear()},exports.groupBy=tt,exports.imageSize=function(t){return new Promise((function(e,r){var n=new Image;n.addEventListener("load",(function(){e({width:this.width,height:this.height})})),n.addEventListener("error",(function(t){r(t.error)})),n.src=t}))},exports.insertText=function(t,e,r){void 0===r&&(r=st(t));var n=t.value;t.value=n.substr(0,r)+e+n.substr(r),ft(t,r+e.length)},exports.isBlank=function(t){return H.isBlank(t)},exports.isEditable=function(t){return t&&(t.isContentEditable||["input","date","datetime","select","textarea"].includes(lt(t.tagName)))},exports.isEmpty=function(t){return H.isEmpty(t)},exports.isFloat=function(t){return H.isFloat(t)},exports.isNullOrUndefined=E,exports.isNumber=function(t){return H.isInteger(t)},exports.isRange=U,exports.lastFocus=pt,exports.listToTree=function(t,e){var r=void 0===e?{}:e,n=r.bridge,o=void 0===n?R:n,i=r.isRoot,u=void 0===i?function(t){return!t.parentId}:i,a=t.reduce((function(e,r){var n=o(r);if(u(n))return e.push(n),e;for(var i,a=M(t);!(i=a()).done;){var c=o(i.value);if(n.parentId===c.id)return c.child=c.child||[],c.child.push(n),e}return e}),[]),c=a.length;return 0===c?{}:1===c?a[0]:a},exports.loadResource=function(t,e,r){void 0===r&&(r={});try{return Promise.resolve(fetch(t,r)).then((function(t){return Promise.resolve(t.blob()).then((function(t){e.src=window.URL.createObjectURL(t)}))}))}catch(t){return Promise.reject(t)}},exports.loadScript=function(t){return new Promise((function(e,r){var n=document.createElement("script");n.async=!1,n.src=t,n.addEventListener("load",(function(){return e()})),n.addEventListener("error",r),document.body.appendChild(n)}))},exports.loadStyle=function(t){return new Promise((function(e,r){var n=document.createElement("link");n.rel="stylesheet",n.href=t,n.addEventListener("load",(function(){return e()})),n.addEventListener("error",r),document.body.appendChild(n)}))},exports.logger=me,exports.mapToObject=function(t){for(var e,r={},n=M(t);!(e=n()).done;){var o=e.value;Reflect.set(r,o[0],o[1])}return r},exports.mergeMap=function(t){var e=0,r=new Set;return new Proxy(t,{apply:function(t,n,o){try{var i=Reflect.apply(t,n,o),u=e;return r.add(u),e++,Promise.resolve(a((function(){return!r.has(u-1)}))).then((function(){return r.delete(u),Promise.resolve(i)}))}catch(t){return Promise.reject(t)}}})},exports.nodeBridgeUtil=be,exports.not=I,exports.objToFormData=function(t){return Object.entries(t).reduce((function(t,e){var r=e[0],n=e[1];return n instanceof Blob?t.append(r,n):t.append(r,n&&n.toString()),t}),new FormData)},exports.objectToMap=function(t){return Object.keys(t).reduce((function(e,r){return e.set(r,Reflect.get(t,r))}),new Map)},exports.once=function(t){var e,r=!0,n=new Proxy(t,{apply:function(t,n,o){return r?(r=!1,A(Reflect.apply(t,n,o),(function(t){return e=t}))):e}});return Object.assign(n,{origin:t,clear:function(){e=null}})},exports.onceOfSameParam=Zt,exports.or=T,exports.parseUrl=function(t){if(!t)throw new Error("Url cannot be empty");var e=new RegExp("^((\\w+)://([\\w\\.]*)(:(\\d+))?)(.*)").exec(t);if(null===e)return null;var n=e[1],o=e[2],i=e[3],u=e[5],a=e[6],c=t.substr(n.length),s=c.indexOf("?");if(-1===s){var f=c;return{url:t,website:n,protocol:o,domain:i,port:parseInt(u),href:a,accessPath:f,params:new Map}}var l=c.substr(0,s);return l.endsWith("/")&&(l=l.substring(0,l.length-1)),{url:t,website:n,protocol:o,domain:i,port:u||r.get(o)||0,href:a,accessPath:l,params:c.substr(s+1).split("&").map((function(t){return t.split("=")})).filter((function(t){return""!==t[0]})).reduce((function(t,e){var r=decodeURIComponent(e[0]),n=decodeURIComponent(1===e.length?"":e[1]),o=t.get(r);return void 0===o?t.set(r,n):(Array.isArray(o)||t.set(r,[o]),void 0!==t.get(r).length&&t.get(r).push(n)),t}),new Map)}},exports.partial=Re,exports.pathUtil=de,exports.pick=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var o=new Set(r);return Object.entries(t).reduce((function(t,e){var r=e[0],n=e[1];return o.has(r)&&Reflect.set(t,r,n),t}),{})},exports.proxyStorage=function(t){var e=new Set(["storage","length","clear","getItem","setItem","removeItem","key"]);return new Proxy(new De(t),{get:function(t,r,n){return e.has(r)?Reflect.get(t,r,n):Q((function(){return JSON.parse(t.getItem(r.toString()))}),null)},set:function(t,r,n,o){return e.has(r)?Reflect.set(t,r,o):(t.setItem(r.toString(),null!=n?JSON.stringify(n):n),!0)}})},exports.randomInt=function(t,e){var r=e?t:0,n=e||t;if(n<=0)throw new Error("最大值不能为 0");return r+Math.floor(Math.random()*(n-r))},exports.randomStr=function(t){for(var e="",r=0;r<t;r++)e+=Te.charAt(Math.floor(Math.random()*Ie));return e},exports.range=et,exports.readLocal=o,exports.remindLeavePage=function(t){void 0===t&&(t=function(){return!1});var e=function(e){return!t()&&(e.returnValue="请不要关闭页面","请不要关闭页面")};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}},exports.removeEl=function(t){var e=t.parentElement;return null==e?null:e.removeChild(t)},exports.removeText=function(t,e,r){void 0===e&&(e=t.selectionStart),void 0===r&&(r=t.selectionEnd);var n=st(t),o=t.value;t.value=o.substr(0,e)+o.substr(r,o.length),ft(t,n)},exports.repeatedCall=function(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return et(0,t).map((function(){return e.apply(void 0,n)}))},exports.returnItself=R,exports.returnReasonableItself=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e.length;return 0===n?null:1===n?e[0]:e},exports.safeExec=Q,exports.segmentation=function(t,e){return t.reduce((function(t,r,n){return 1==(n+1)%e&&t.push([]),t[t.length-1].push(r),t}),new Array)},exports.set=function(t,e,r){X.isString(e)&&(e=Le(e));for(var n=t,o=0,i=e.length;o<i;o++){var u=e[o];if(o===i-1)return n[u]=r,!0;if(!X.isObject(n=n[u]))return!1}return!1},exports.setCursorPosition=ft,exports.setCusorPostion=function(t,e,r){return void 0===r&&(r=e),ft(t,e,r)},exports.sets=function(t,e){for(var r in e)t.set(r,e[r]);return t},exports.singleModel=function(t){var e;return new Proxy(t,{construct:function(t,r,n){return void 0===e&&(e=Reflect.construct(t,r,n)),e}})},exports.sleep=function(t){for(var e=performance.now()+t;performance.now()<=e;);},exports.sortBy=function(t,e){void 0===e&&(e=R);var r=G(e);return function t(e,r){if(e.length<=1)return e;for(var n=Math.floor(e.length/2),o=e[n],i=[],u=[],a=0,c=e.length;a<c;a++)if(a!==n){var s=e[a];r(s,o)<=0?i.push(s):u.push(s)}return t(i,r).concat([o]).concat(t(u,r))}(t.map((function(t,e){return[t,e]})),(function(e,n){var o=n[0],i=n[1],u=r(e[0],e[1],t),a=r(o,i,t);return u===a?0:u<a?-1:1})).map((function(e){return t[e[1]]}))},exports.spliceParams=function(t){return void 0===t&&(t={}),Array.from(Object.entries(t)).reduce((function(t,e){var r=e[0],n=e[1];return null==n?t:(n instanceof Date?t+=u(r,i(n,"yyyy-MM-ddThh:mm:ss.SSS")):t+=n instanceof Array?n.map((function(t){return u(r,t instanceof Date?i(t,"yyyy-MM-ddThh:mm:ss.SSS"):t)})).join("&"):u(r,n),t+"&")}),"")},exports.strToArrayBuffer=function(t){for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n<t.length;++n)r[n]=255&t.charCodeAt(n);return e},exports.strToDate=function(t,e){return ct(t,e)},exports.stringValidator=H,exports.switchMap=function(t){var e,r=0,n=0;return new Proxy(t,{apply:function(t,o,i){try{var u=r;return r++,Promise.resolve(Reflect.apply(t,o,i)).then((function(t){return u<n?e:(e=t,n=u,t)}))}catch(t){return Promise.reject(t)}}})},exports.throttle=function(t,e){var r,n=0;return new Proxy(e,{apply:function(e,o,i){return new Promise((function(u){var a=Date.now();if(a-n>t)return r=Reflect.apply(e,o,i),n=a,void u(r);u(r)}))}})},exports.timing=yt,exports.toLowerCase=lt,exports.toObject=function(t,e,r){void 0===r&&(r=R);var n=G(e),o=G(r);return t.reduce((function(t,e,r,i){var u=n(e,r,i);return Reflect.has(t,u)||Reflect.set(t,u,o(e,r,i)),t}),{})},exports.toString=dt,exports.toUpperCase=mt,exports.toggleClass=function(t,e){var r=Array.from(Object.values(e));return function(n){r.forEach((function(e){return t.classList.remove(e)})),t.classList.add(e[n])}},exports.treeMapping=we,exports.treeToList=function(t,e){var r=void 0===e?{}:e,n=r.calcPath,o=void 0!==n&&n,i=r.bridge,u=void 0===i?R:i,a=[],c=u(t);o&&(c.path=c.id+"");for(var s,f=[c],l=new Set,h=new Map,p=function(t){var e=f.shift();if(void 0===(t=u(e))||l.has(e))return s=t,"continue";l.add(e),a.push(t);var r=t.child;if(fe.isEmpty(r))return s=t,"continue";var n=r.filter((function(t){return!E(t)||l.has(t)}));f.push.apply(f,o?n.map((function(e){var r=u(e);return h.get(r.id)===r.id?(s=t,r):(r.path=t.path+","+r.id,h.set(r.id,r.id),s=t,r)})):n),s=t};f.length>0;)p(s);return a},exports.trySometime=function(t,e,r){return void 0===e&&(e=1),void 0===r&&(r=function(t){return!0}),new Proxy(t,{apply:function(t,n,o){try{var i,u=function(t){if(a)return t;throw i},a=!1,c=0,s=p((function(){return!a&&c<e}),(function(){return c++}),(function(){return d((function(){return Promise.resolve(Reflect.apply(t,n,o)).then((function(t){if(r(t))return a=!0,t;throw t}))}),(function(t){i=t}))}));return Promise.resolve(s&&s.then?s.then(u):u(s))}catch(t){return Promise.reject(t)}}})},exports.trySometimeParallel=function(t,e,r){return void 0===e&&(e=1),void 0===r&&(r=function(t){return!0}),new Proxy(t,{apply:function(t,n,o){try{return Promise.resolve(new Promise((function(i,u){try{var a,c=function(){u(a)},s=d((function(){return Promise.resolve(Promise.all(et(0,e).map((function(){return Promise.resolve(d((function(){return Promise.resolve(Reflect.apply(t,n,o)).then((function(t){throw!0===r(t)&&i(t),t}))}),(function(t){a=t})))})))).then((function(){}))}),(function(t){console.log(t)}));return Promise.resolve(s&&s.then?s.then(c):c())}catch(t){return Promise.reject(t)}})))}catch(t){return Promise.reject(t)}}})},exports.uniqueBy=function(t,e){void 0===e&&(e=R);var r=G(e),n=new Set;return t.filter((function(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];var u=r.apply(void 0,[t].concat(o));return!n.has(u)&&(n.add(u),!0)}))},exports.wait=a,exports.waitResource=function(t,e){var r=void 0===e?{}:e,n=r.interval,o=void 0===n?100:n,i=r.max,u=void 0===i?10:i,a=0;return new Promise((function(e,r){var n=setInterval((function(){t()&&(clearInterval(n),e()),++a>=u&&(clearInterval(n),r(new Error("waitResource call timeout")))}),o)}))},exports.watch=function(t,e,r){void 0===r&&(r=100);var n=t(),o=setInterval((function(){var r=t();n!==r&&(e(r,n),n=r)}),r);return function(){return clearInterval(o)}},exports.watchEventListener=function(){var t=function(t,e,r,n){this.el=t,this.type=e,this.listener=r,this.useCapture=n},e=document.addEventListener,r=EventTarget.prototype.addEventListener,n=document.removeEventListener,o=EventTarget.prototype.removeEventListener,i=[];document.addEventListener=EventTarget.prototype.addEventListener=function(n,o,u){void 0===u&&(u=!1);var a=this===document?e:r;i.push(new t(this,n,o,u)),a.apply(this,arguments)},document.removeEventListenerByType=EventTarget.prototype.removeEventListenerByType=function(t){var e=arguments,r=this,u=this===document?n:o,a=i.map((function(t,n){return t.el===r||t.type===e[0]?n:-1})).filter((function(t){return-1!==t}));a.forEach((function(t){var e=i[t];u.apply(e.el,[e.type,e.listener,e.useCapture])})),a.sort((function(t,e){return e-t})).forEach((function(t){return i.splice(t,1)}))}},exports.watchObject=function(t,e){var r={get:function(t,e){try{return new Proxy(Reflect.get(t,e),r)}catch(r){return Reflect.get(t,e)}},set:function(t,r,n){return e(t,r,n),Reflect.set(t,r,n)}};return new Proxy(t,r)};
//# sourceMappingURL=rx-util.cjs.production.min.js.map
